#
# Squid configuration settings for Debian
#

# Logs are managed by logrotate on Debian
logfile_rotate 0

# For extra security Debian packages only allow
# localhost to use the proxy on new installs
#
# Let the client's favourite video site through
acl youtube dstdomain .youtube.com
acl google dstdomain .google.com
acl github dstdomain .github.com
acl gstatic dstdomain .gstatic.com
acl stackoverflow dstdomain .stackoverflow.com
acl udacity dstdomain .udacity.com
acl gapi dstdomain .googleapis.com
acl cfn dstdomain .cloudfront.net
acl awsc dstdomain .amazonaws.com
acl ac dstdomain .amazon.com
acl fc dstdomain .facebook.com
acl tc dstdomain .twitter.com

cache allow youtube
cache allow google
cache allow github
cache allow gstatic
cache allow stackoverflow
cache allow udacity
cache allow gapi
cache allow cfn
cache allow awsc
cache allow ac
cache allow fc
cache allow tc

cache allow all

refresh_pattern ^ftp: 1440 20% 10080
refresh_pattern ^gopher: 1440 0% 1440
refresh_pattern -i .(gif|png|jpg|jpeg|ico)$ 10080 90% 43200 override-expire ignore-no-cache ignore-no-store ignore-private
refresh_pattern -i .(iso|avi|wav|mp3|mp4|mpeg|swf|flv|x-flv|acc|aac)$ 43200 90% 432000 override-expire ignore-no-cache ignore-no-store ignore-private
refresh_pattern -i .(deb|rpm|exe|zip|tar|tgz|ram|rar|bin|ppt|doc|tiff|db|pem|pks|pkass|crt|csr|log|gz|tar|tz|zip|gunzip|key)$ 10080 90% 43200 override-expire ignore-no-cache ignore-no-store ignore-private
refresh_pattern -i .index.(html|htm)$ 0 40% 10080
refresh_pattern -i .(html|htm|css|js|xml|php|txt|json|ini|init|md|sh|bash|yaml|yml)$ 1440 40% 40320
refresh_pattern . 0 40% 40320

hierarchy_stoplist cgi-bin ?

http_access allow localnet

acl localnet src 192.168.0.0/24 # Home Network

acl SSL_ports port 443 8443 4443 9443 7443
acl Safe_ports port 80 880 443 8443 8080 8082 8081 8181 8282 210 119 70 21 1025-65535


acl CONNECT method CONNECT

http_access allow all

dns_v4_first on 

#dns_v4_fallback 35.192.105.158 35.232.120.211

cache_mem  512 MB

maximum_object_size 8 GB

maximum_object_size_in_memory  64 MB


workers 32

buffered_logs on

cache_dir ufs /var/spool/squid 4800000 32 512
dns_nameservers 192.168.44.77
dns_nameservers 192.168.44.77
